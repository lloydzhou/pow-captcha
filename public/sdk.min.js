(function(){const n=3e4;const o=document.getElementsByTagName("script");const t=o[o.length-1];const c=new URL(t.src).origin;const e=window.POW=function(o={}){const t=o.endpoint||c;const e=document.createElement("iframe");let i=null;let u=null;return new Promise(((c,s)=>{i=function(n){if(n.data.type==="pow"&&n.source===e.contentWindow){c(n.data.token)}};u=setTimeout((()=>{s(new Error("POW timeout"))}),o.timeout||n);window.addEventListener("message",i);e.src=t+"/challenge";e.style.display="none";document.body.appendChild(e)})).finally((()=>{document.body.removeChild(e);if(i){window.removeEventListener("message",i)}if(u){clearTimeout(u)}}))};function i(){const o=document.querySelectorAll(".pow-captcha");o.forEach((o=>{const t=document.createElement("input");t.type="hidden";t.name="pow-captcha-token";o.appendChild(t);const c={};if(o.dataset.timeout){const t=parseInt(o.dataset.timeout,n);if(!isNaN(t)&&t>0){c.timeout=t}}function i(n,...o){if(n&&typeof window[n]==="function"){try{return window[n](...o)}catch(o){console.error('POW Captcha: Error executing callback function "'+n+'".',o)}}else if(n){console.warn('POW Captcha: Callback function "'+n+'" not found or not a function.')}}e(c).then((n=>{t.value=n;i(o.dataset.o,n)})).catch((n=>{i(o.dataset.t,n)}))}))}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",i)}else{i()}})();
