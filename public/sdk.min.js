(function(){const n=document.getElementsByTagName("script");const e=n[n.length-1];const o=new URL(e.src).origin;window.POW=function(n={}){const e=n.endpoint||o;const t=document.createElement("iframe");let c=null;let i=null;return new Promise(((o,u)=>{c=function(n){if(n.data.type==="pow"){o(n.data.token)}};i=setTimeout((()=>{u(new Error("POW timeout"))}),n.timeout||3e4);window.addEventListener("message",c);t.src=e+"/challenge";t.style.display="none";document.body.appendChild(t)})).finally((()=>{document.body.removeChild(t);if(c){window.removeEventListener("message",c)}if(i){clearTimeout(i)}}))}})();
